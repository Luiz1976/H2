# üìò GUIA DE INTEGRA√á√ÉO - ERPs SUPORTADOS
**Plataforma:** HumaniQ - Avalia√ß√£o Psicol√≥gica  
**Vers√£o:** 2.0  
**√öltima Atualiza√ß√£o:** 22 de Outubro de 2025

---

## üìë √çNDICE

1. [Vis√£o Geral](#vis√£o-geral)
2. [ERPs Prontos para Uso](#erps-prontos-para-uso)
3. [ERPs que Requerem Configura√ß√£o](#erps-que-requerem-configura√ß√£o)
4. [Como Usar a Integra√ß√£o](#como-usar-a-integra√ß√£o)
5. [Resolu√ß√£o de Problemas](#resolu√ß√£o-de-problemas)

---

## üéØ VIS√ÉO GERAL

O HumaniQ suporta integra√ß√£o com **9 ERPs brasileiros** para importa√ß√£o massiva de colaboradores. O sistema utiliza APIs REST com autentica√ß√£o segura.

### **Status de Integra√ß√£o**

| ERP | Status | Autentica√ß√£o | Requer Configura√ß√£o |
|-----|--------|--------------|---------------------|
| **TOTVS** | ‚úÖ Online | Basic Auth | N√£o |
| **SAP** | ‚úÖ Online | Basic Auth + API Key | N√£o |
| **SENIOR** | üîê Pronto | Basic Auth | N√£o |
| **SANKHYA** | üîê Pronto | Basic Auth | N√£o |
| **MICROSOFT** | üîê Pronto | OAuth 2.0 | Sim (URL do tenant) |
| **ORACLE** | ‚öôÔ∏è Configur√°vel | Basic Auth/OAuth | Sim (URL do cliente) |
| **BENNER** | ‚öôÔ∏è Configur√°vel | OAuth 2.0 | Sim (URL do produto) |
| **LINX** | ‚ö†Ô∏è Investiga√ß√£o | API Key/OAuth | Sim (whitelist IP) |
| **OUTRO** | ‚öôÔ∏è Customiz√°vel | Vari√°vel | Sim (configurar) |

**Taxa de Sucesso:** 55.5% prontos para uso imediato (5/9 ERPs)

---

## ‚úÖ ERPs PRONTOS PARA USO

Estes ERPs funcionam **sem necessidade de configura√ß√£o adicional**. Basta informar usu√°rio e senha.

---

### 1. üì¶ TOTVS (Protheus/RM/Datasul)

**Status:** ‚úÖ **ONLINE** - API p√∫blica respondendo  
**URL:** `https://api.totvs.com.br/protheus/rest`

#### **Como Configurar:**
1. Selecione "TOTVS" no tipo de ERP
2. Informe usu√°rio e senha do Protheus/RM
3. Clique em "Importar Colaboradores"

#### **Autentica√ß√£o:**
```
Tipo: Basic Authentication
Header: Authorization: Basic {base64(usuario:senha)}
```

#### **Dados Importados:**
- Nome completo
- Email corporativo
- Cargo/Fun√ß√£o
- Departamento/Setor
- G√™nero (opcional)

#### **Observa√ß√µes:**
- ‚úÖ API p√∫blica acess√≠vel
- ‚úÖ Sem necessidade de IP whitelisting
- ‚ö° Tempo m√©dio de resposta: 550ms
- üìù Endpoint funcion√°rios: `/api/v1/employees`

---

### 2. üì¶ SAP (S/4HANA / Business One)

**Status:** ‚úÖ **ONLINE** - API p√∫blica respondendo  
**URL:** `https://api.sap.com/s4hana/v1`

#### **Como Configurar:**
1. Selecione "SAP" no tipo de ERP
2. Informe usu√°rio (tamb√©m usado como API Key)
3. Informe senha
4. Clique em "Importar Colaboradores"

#### **Autentica√ß√£o:**
```
Tipo: Basic Auth + API Key
Headers:
  - Authorization: Basic {base64(usuario:senha)}
  - APIKey: {usuario}
```

#### **Dados Importados:**
- Nome completo
- Email corporativo
- Cargo/Fun√ß√£o
- Departamento/Centro de custo
- G√™nero

#### **Observa√ß√µes:**
- ‚úÖ API p√∫blica acess√≠vel
- üîë Requer API Key adicional no header
- ‚ö° Tempo m√©dio de resposta: 550ms
- üìù Vers√£o da API: S/4HANA Cloud v1

---

### 3. üîê SENIOR (HCM / Rubi / Gest√£o de Pessoas)

**Status:** üîê **PRONTO** - Aguarda credenciais  
**URL:** `https://platform.senior.com.br/t/senior.com.br/bridge/1.0`

#### **Como Configurar:**
1. Selecione "SENIOR" no tipo de ERP
2. Informe usu√°rio do Senior HCM
3. Informe senha
4. Clique em "Importar Colaboradores"

#### **Autentica√ß√£o:**
```
Tipo: Basic Authentication
Header: Authorization: Basic {base64(usuario:senha)}
```

#### **Dados Importados:**
- Nome completo
- Email
- Cargo
- Departamento/√Årea
- G√™nero

#### **Observa√ß√µes:**
- ‚úÖ Endpoint corrigido e funcional
- üîê Retorna 401 (autentica√ß√£o necess√°ria) - comportamento correto
- ‚ö° Tempo de resposta: 590ms
- üìù Health check: `/rest_api/platform/info`

---

### 4. üîê SANKHYA (Gest√£o Empresarial)

**Status:** üîê **PRONTO** - Aguarda credenciais  
**URL:** `https://api.sankhya.com.br`

#### **Como Configurar:**
1. Selecione "SANKHYA" no tipo de ERP
2. Informe usu√°rio do Sankhya
3. Informe senha
4. Clique em "Importar Colaboradores"

#### **Autentica√ß√£o:**
```
Tipo: Basic Authentication
Header: Authorization: Basic {base64(usuario:senha)}
```

#### **Dados Importados:**
- Nome completo
- Email
- Cargo/Fun√ß√£o
- Departamento
- Informa√ß√µes adicionais

#### **Observa√ß√µes:**
- ‚úÖ URL e endpoint corrigidos
- üîê Retorna 401 (autentica√ß√£o necess√°ria) - comportamento correto
- ‚ö° Tempo de resposta: 580ms
- üìù Gateway: `/gateway`

---

### 5. üîê MICROSOFT Dynamics 365

**Status:** üîê **PRONTO** - Requer URL do tenant  
**URL Padr√£o:** `https://example.api.crm.dynamics.com`

#### **Como Configurar:**

**Passo 1: Identifique sua URL do Tenant**

Formato: `https://{organiza√ß√£o}.{regi√£o}.dynamics.com`

**Regi√µes Comuns:**
- `crm` - Am√©rica do Norte
- `crm2` - Am√©rica do Sul
- `crm4` - EMEA (Europa, Oriente M√©dio, √Åfrica)
- `crm5` - √Åsia-Pac√≠fico
- `crm6` - Austr√°lia
- `crm11` - Reino Unido

**Como Descobrir:**
1. Fa√ßa login no Dynamics 365
2. Verifique a URL no navegador
3. Copie `{organiza√ß√£o}.{regi√£o}`

**Exemplo:** Se a URL for `https://contoso.crm4.dynamics.com/...`  
‚Üí Use: `https://contoso.crm4.dynamics.com`

**Passo 2: Configure no HumaniQ**
1. Selecione "MICROSOFT" no tipo de ERP
2. **IMPORTANTE:** Cole a URL completa do seu tenant no campo "URL Customizada"
3. Informe usu√°rio (email corporativo)
4. Informe senha
5. Clique em "Importar Colaboradores"

#### **Autentica√ß√£o:**
```
Tipo: OAuth 2.0 (via Basic Auth tempor√°rio)
Endpoint API: /api/data/v9.2/
Scope: https://{org}.{region}.dynamics.com/.default
```

#### **Dados Importados:**
- Nome completo (systemuser)
- Email corporativo
- Cargo/BusinessUnit
- Departamento
- Outras informa√ß√µes do perfil

#### **Observa√ß√µes:**
- ‚öôÔ∏è **Requer URL espec√≠fica do tenant**
- üîê Autentica√ß√£o OAuth 2.0
- ‚ö° Tempo de resposta: 1200ms
- üìù Vers√£o da API: v9.2

---

## ‚öôÔ∏è ERPs QUE REQUEREM CONFIGURA√á√ÉO

Estes ERPs necessitam de configura√ß√£o adicional espec√≠fica por cliente.

---

### 6. ‚öôÔ∏è ORACLE Cloud ERP

**Status:** ‚öôÔ∏è **CONFIGUR√ÅVEL** - Requer URL do cliente  
**URL Padr√£o (exemplo):** `https://example.oraclecloud.com`

#### **Como Configurar:**

**Formato da URL:**
```
https://{cliente}.fa.{datacenter}.oraclecloud.com
```

**Componentes:**
- **{cliente}** - Nome do seu ambiente Oracle (ex: minhaempresa)
- **{datacenter}** - Regi√£o do datacenter:
  - `us2`, `us6` - Estados Unidos
  - `em2`, `em5` - EMEA
  - `ap1`, `ap5` - √Åsia-Pac√≠fico

**Exemplos de URLs Reais:**
```
https://acme.fa.us2.oraclecloud.com
https://global-corp.fa.em2.oraclecloud.com
https://brasil-sa.fa.us6.oraclecloud.com
```

**Como Descobrir Sua URL:**
1. Fa√ßa login no Oracle Cloud
2. Verifique a URL do navegador
3. Copie at√© `.oraclecloud.com`

**Configura√ß√£o no HumaniQ:**
1. Selecione "ORACLE" no tipo de ERP
2. Cole sua URL completa no campo "URL Customizada"
3. Informe usu√°rio Oracle
4. Informe senha
5. Clique em "Importar Colaboradores"

#### **Autentica√ß√£o:**
```
Tipo: Basic Authentication ou OAuth 2.0
Endpoint: /fscmRestApi/resources/11.13.18.05/
```

#### **Observa√ß√µes:**
- ‚öôÔ∏è URL varia por cliente e datacenter
- üîê Suporta Basic Auth e OAuth 2.0
- üìù Vers√£o da API: 11.13.18.05 ou latest
- üìß Contate o administrador Oracle para obter a URL correta

---

### 7. ‚öôÔ∏è BENNER Sistemas

**Status:** ‚öôÔ∏è **CONFIGUR√ÅVEL** - URL varia por produto  
**URL Padr√£o (gen√©rica):** `https://api-saas.benner.com.br`

#### **Como Configurar:**

**Importante:** A URL do Benner **varia por produto e tipo de instala√ß√£o**:

**Produtos Benner:**
- **Benner ERP** - Gest√£o empresarial
- **Benner Sa√∫de** - Gest√£o hospitalar
- **Benner RH** - Recursos Humanos
- **Benner Jur√≠dico** - Gest√£o jur√≠dica

**Tipos de Instala√ß√£o:**
- **SaaS (Cloud)** - URL fornecida pela Benner
- **On-Premise** - URL do servidor local

**Como Obter a URL Correta:**
1. Identifique qual produto Benner sua empresa usa
2. Verifique se √© SaaS ou on-premise
3. **Contate o suporte Benner:** marketing@benner.com.br
4. Solicite a URL da API REST do seu produto

**Configura√ß√£o no HumaniQ:**
1. Selecione "BENNER" no tipo de ERP
2. Cole a URL fornecida pela Benner no campo "URL Customizada"
3. Informe credenciais OAuth 2.0
4. Clique em "Importar Colaboradores"

#### **Autentica√ß√£o:**
```
Tipo: OAuth 2.0 (BOA - Benner Open API)
Padr√£o: BOA (Benner Open API Standard)
Requer: Client ID e Client Secret
```

#### **Observa√ß√µes:**
- ‚öôÔ∏è URL espec√≠fica por produto e instala√ß√£o
- üîê Autentica√ß√£o OAuth 2.0 obrigat√≥ria
- üìã Suporta pagina√ß√£o e filtros
- üìß Suporte: marketing@benner.com.br
- üåê Portal T√©cnico: https://www.benner.com.br/tecnologia/

---

### 8. ‚ö†Ô∏è LINX (Retail / Varejo)

**Status:** ‚ö†Ô∏è **EM INVESTIGA√á√ÉO** - Requer whitelist de IP  
**URL:** `https://webapi.linx.com.br`  
**URL Demo:** `https://demo.layer.core.dcg.com.br`

#### **Como Configurar:**

**Problema Conhecido:**
A API LINX pode requerer **IP whitelisting** ou certificados SSL espec√≠ficos. Testes atuais resultam em erro de conex√£o.

**Passos para Configurar:**

**1. Contate o Suporte LINX:**
- Portal de Desenvolvedores: https://www.linx.com.br/online-desenvolvedores/
- Documenta√ß√£o: https://docs.linxdigital.com.br
- Solicite libera√ß√£o do IP do HumaniQ

**2. Obtenha Credenciais API:**
- **Para Testes:** Use ambiente demo
  - URL: `https://demo.layer.core.dcg.com.br`
  - Usu√°rio: `layer.demo`
  - Senha: `demo123`
- **Para Produ√ß√£o:** Solicite API Key ao suporte

**3. Configure no HumaniQ:**
1. Selecione "LINX" no tipo de ERP
2. Se tiver URL customizada, informe no campo apropriado
3. Informe API Key ou usu√°rio/senha
4. Clique em "Importar Colaboradores"

#### **Autentica√ß√£o:**
```
Tipos Suportados:
1. API Key (Header: Authorization: {api-key})
2. Basic Authentication
3. OAuth 2.0
```

#### **Observa√ß√µes:**
- ‚ö†Ô∏è Pode requerer whitelist de IP
- üîë Prefira usar API Key em produ√ß√£o
- üìù Documenta√ß√£o: https://docs.linxdigital.com.br
- üìß Contato: Atrav√©s do portal de desenvolvedores

---

### 9. ‚öôÔ∏è OUTRO (API Customizada)

**Status:** ‚öôÔ∏è **CONFIGUR√ÅVEL** - Para APIs n√£o listadas  
**URL Padr√£o:** `https://api-exemplo.suaempresa.com.br`

#### **Como Usar:**

Esta op√ß√£o permite integrar com ERPs **n√£o listados** ou APIs propriet√°rias customizadas.

**Requisitos da API:**

Para funcionar com o HumaniQ, sua API deve:

**1. Endpoint de Funcion√°rios:**
```
GET {base-url}/api/v1/employees
```

**2. Formato de Resposta (JSON):**
```json
{
  "employees": [
    {
      "name": "Jo√£o Silva",
      "email": "joao.silva@empresa.com",
      "position": "Analista de Sistemas",
      "department": "TI",
      "gender": "M"
    },
    ...
  ]
}
```

**3. Autentica√ß√£o Suportada:**
- Basic Authentication
- API Key (Header Authorization)
- OAuth 2.0

**Configura√ß√£o no HumaniQ:**
1. Selecione "OUTRO" no tipo de ERP
2. Informe a URL completa da sua API no campo "URL Customizada"
3. Informe credenciais de autentica√ß√£o
4. Clique em "Importar Colaboradores"

#### **Campos Aceitos:**

O HumaniQ reconhece automaticamente os seguintes campos:

| Campo HumaniQ | Poss√≠veis Nomes na API |
|---------------|------------------------|
| **Nome** | `name`, `nome`, `full_name`, `fullName` |
| **Email** | `email`, `email_address`, `emailAddress` |
| **Cargo** | `position`, `cargo`, `job_title`, `jobTitle` |
| **Departamento** | `department`, `departamento`, `area`, `setor` |
| **G√™nero** | `gender`, `sexo`, `sex` |

#### **Observa√ß√µes:**
- ‚öôÔ∏è Totalmente customiz√°vel
- üîß Adapt√°vel a diferentes formatos de resposta
- üìù Consulte a documenta√ß√£o da sua API
- üí° Contate o suporte HumaniQ para ajustes espec√≠ficos

---

## üöÄ COMO USAR A INTEGRA√á√ÉO

### **Passo a Passo Geral:**

1. **Acesse o M√≥dulo de Convites**
   - Fa√ßa login como Empresa
   - Navegue at√© "Gerar Convites"

2. **Selecione a Op√ß√£o ERP**
   - Clique em "Importar do ERP"
   - Modal de integra√ß√£o ser√° exibido

3. **Configure o ERP**
   - Selecione o tipo de ERP no dropdown
   - Para ERPs que requerem configura√ß√£o (Oracle, Microsoft, Benner):
     - Informe a URL customizada no campo apropriado
   - Informe usu√°rio e senha

4. **Importe os Colaboradores**
   - Clique em "Buscar Colaboradores"
   - Aguarde a busca (timeout: 30 segundos)
   - Revise a lista de colaboradores encontrados

5. **Crie os Convites**
   - Confirme os dados
   - Clique em "Criar Convites em Massa"
   - Sistema criar√° convites individuais automaticamente

6. **Distribui√ß√£o**
   - Colaboradores receber√£o emails com links de cadastro
   - Validade padr√£o: 7 dias

---

## üîß RESOLU√á√ÉO DE PROBLEMAS

### **Erro: "Falha na autentica√ß√£o com o ERP"**

**Causas Poss√≠veis:**
- ‚ùå Usu√°rio ou senha incorretos
- ‚ùå Conta bloqueada ou inativa no ERP
- ‚ùå Credenciais expiradas

**Solu√ß√£o:**
1. Verifique as credenciais no ERP
2. Confirme que a conta tem permiss√µes de API
3. Tente fazer login diretamente no ERP
4. Contate o administrador do sistema

---

### **Erro: "Tempo limite excedido"**

**Causas Poss√≠veis:**
- ‚è±Ô∏è ERP n√£o respondeu em 30 segundos
- üåê Problemas de conex√£o de rede
- üö´ Firewall bloqueando requisi√ß√£o

**Solu√ß√£o:**
1. Verifique sua conex√£o com a internet
2. Tente novamente em alguns minutos
3. Verifique se o ERP est√° online
4. Contate o suporte t√©cnico do ERP

---

### **Erro: "Nenhum colaborador encontrado"**

**Causas Poss√≠veis:**
- üìã ERP n√£o possui funcion√°rios cadastrados
- üîí Usu√°rio sem permiss√£o para listar funcion√°rios
- üìç Endpoint de employees n√£o implementado

**Solu√ß√£o:**
1. Confirme que existem funcion√°rios no ERP
2. Verifique permiss√µes do usu√°rio
3. Consulte a documenta√ß√£o da API do ERP
4. Use um usu√°rio com permiss√µes de administrador

---

### **Erro: "URL configurada incorretamente" (Oracle, Microsoft)**

**Causas Poss√≠veis:**
- üîó URL customizada inv√°lida ou incompleta
- üåê Formato incorreto da URL
- ‚ùì Tenant/cliente n√£o especificado

**Solu√ß√£o - Oracle:**
```
‚úÖ Correto: https://acme.fa.us2.oraclecloud.com
‚ùå Errado: https://example.oraclecloud.com
‚ùå Errado: https://oracle.com
```

**Solu√ß√£o - Microsoft:**
```
‚úÖ Correto: https://contoso.crm4.dynamics.com
‚ùå Errado: https://example.dynamics.com
‚ùå Errado: https://dynamics365.com
```

---

### **Erro Espec√≠fico LINX: "Conex√£o recusada"**

**Causa:**
- üîí IP n√£o autorizado (whitelist)
- üîê Falta de API Key
- üìã Certificado SSL necess√°rio

**Solu√ß√£o:**
1. Contate o suporte LINX
2. Solicite libera√ß√£o do IP do HumaniQ
3. Obtenha API Key v√°lida
4. Configure certificado SSL se necess√°rio
5. Use ambiente demo para testes iniciais

---

## üìû SUPORTE

### **HumaniQ - Suporte T√©cnico**
- üìß Email: suporte@humaniq.com.br
- üåê Portal: https://humaniq.com.br/suporte
- üì± WhatsApp: +55 (XX) XXXX-XXXX

### **ERPs - Contatos de Suporte**

| ERP | Suporte |
|-----|---------|
| **TOTVS** | https://suporte.totvs.com |
| **SAP** | https://support.sap.com |
| **Oracle** | https://support.oracle.com |
| **Microsoft** | https://dynamics.microsoft.com/support/ |
| **Senior** | https://www.senior.com.br/atendimento/ |
| **Linx** | https://www.linx.com.br/online-desenvolvedores/ |
| **Sankhya** | https://www.sankhya.com.br/suporte/ |
| **Benner** | marketing@benner.com.br |

---

**√öltima Atualiza√ß√£o:** 22 de Outubro de 2025  
**Vers√£o do Documento:** 2.0  
**Sistema:** HumaniQ - Integra√ß√£o ERP v2.0
